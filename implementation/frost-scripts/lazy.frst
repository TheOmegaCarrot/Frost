export def gen = fn start -> {
    def [n, me] = [start, self]
    [ n , fn -> me(n + 1) ]
}

export def gen_take_while = fn genpair, pred -> {
    def [n, getnext] = genpair
    def me = self

    if pred(n): [ n , fn -> me(getnext(), pred) ]
    else: []
}

export def gtw = gen_take_while

export def lazy_collect = fn genpair -> {
    def n = genpair[0]
    def next = genpair[1]

    if len(genpair) == 0: []
    else: [n] + self(next())
}

export def lcollect = lazy_collect
