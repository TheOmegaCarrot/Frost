def missing_uri = try_call(http.request, [{
  method: 'GET'
}])
assert(not missing_uri.ok, 'missing uri fails')
assert(contains(missing_uri.error, 'missing required field: uri'),
       'missing uri error')

def bad_body_type = try_call(http.request, [{
  uri: {
    host: 'definitely.invalid.test',
    tls: false,
    path: '/get'
  },
  method: 'GET',
  body: 42
}])
assert(not bad_body_type.ok, 'non-string body fails')
assert(contains(bad_body_type.error, 'body must be a String'),
       'non-string body error')

def bad_uri_key = try_call(http.request, [{
  uri: {
    host: 'definitely.invalid.test',
    tls: false,
    nope: true
  },
  method: 'GET'
}])
assert(not bad_uri_key.ok, 'unexpected uri key fails')
assert(contains(bad_uri_key.error, 'unexpected key in uri'),
       'unexpected uri key error')
